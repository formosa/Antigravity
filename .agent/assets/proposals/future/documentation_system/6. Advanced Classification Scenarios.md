
## 6. Advanced Classification Scenarios

### 6.1 Hybrid Information Fragments

Some statements contain information spanning multiple tiers. Apply **decomposition** to separate concerns.

#### Scenario 1: Technology-Constraint Hybrid

**Input:**

> "Use ZeroMQ ROUTER-DEALER pattern because it provides non-blocking, fault-isolated IPC required by the reliability SLA."

**Decomposition:**

1.  **Business Requirement (BRD):**
> **Embedded Example Type:** reStructuredText BRD directive
~~~rst
.. brd:: System must ensure fault tolerance and maintainability.
   :id: BRD-2

~~~

2.  **Constraint (NFR):**
> **Embedded Example Type:** reStructuredText NFR directive
~~~rst
.. nfr:: No process shall block waiting for another.
   :id: NFR-5.1
   :links: BRD-2

~~~

3.  **Architecture (SAD):**
> **Embedded Example Type:** reStructuredText SAD directive
~~~rst
.. sad:: Pattern: ZeroMQ ROUTER-DEALER for non-blocking IPC.
   :id: SAD-3.2
   :links: NFR-5.1

~~~

4.  **Rationale (SAD):**
> **Embedded Example Type:** reStructuredText SAD directive
~~~rst
.. sad:: ROUTER-DEALER chosen over REQ-REP
   :id: SAD-3.2.R1

   RATIONALE:
   - Asynchronous (meets NFR-5.1)
   - Identity-based routing (enables fault isolation per NFR-5.2)

~~~

#### Scenario 2: Feature-Schema Hybrid

**Input:**

> "The system shall log all inference requests with timestamp, request_id, model_name, and latency in JSON format."

**Decomposition:**

1.  **Feature (FSD):**
> **Embedded Example Type:** reStructuredText FSD directive
~~~rst
.. fsd:: Traceability: 100% request coverage in logs.
   :id: FSD-6.4
   :links: BRD-3.5

~~~

2.  **Data Contract (ICD):**
> **Embedded Example Type:** reStructuredText ICD directive
~~~rst
.. icd:: Inference Log Schema
   :id: ICD-5
   :links: FSD-6.4

   .. code-block:: json

      {
        "timestamp": "ISO-8601-string",
        "request_id": "uuid-v4",
        "model_name": "string",
        "latency_ms": "float"
      }

~~~

3.  **Implementation (TDD):**
> **Embedded Example Type:** reStructuredText TDD directive
~~~rst
.. tdd:: Log Parsing Requirement
   :id: TDD-3.5
   :links: ICD-5

   Parse inbound frames as [metadata_json, message_string] where metadata conforms to ICD-5 schema.

~~~

### 6.2 Temporal Classification Shifts

Information may move between tiers as the project evolves. Recognize these transitions.

#### Example: Prototype â†’ Production Shift

**Phase 1 (MVP - BRD):**
> **Embedded Example Type:** reStructuredText BRD directive
~~~rst
.. brd:: Future: Multi-GPU ONNX worker pool.
   :id: BRD-9.2

~~~

-   **Status:** Out of scope, strategic placeholder

**Phase 2 (Enhancement - NFR):**
> **Embedded Example Type:** reStructuredText NFR directive
~~~rst
.. nfr:: GPU Scalability
   :id: NFR-8
   :links: BRD-9.2

.. nfr:: Support up to 4 NVIDIA GPUs (A100 40GB each).
   :id: NFR-8.1
   :links: NFR-8

.. nfr:: Linear throughput scaling: 4x GPUs = 3.5x throughput.
   :id: NFR-8.2
   :links: NFR-8

~~~

-   **Status:** Now a constraint for upcoming release

**Phase 3 (Implementation - SAD):**
> **Embedded Example Type:** reStructuredText SAD directive
~~~rst
.. sad:: Multi-GPU Topology
   :id: SAD-6
   :links: NFR-8

.. sad:: Pattern: Worker Pool with GPU Affinity Pinning.
   :id: SAD-6.1
   :links: SAD-6

.. sad:: Load Balancer: Round-robin across DEALER sockets.
   :id: SAD-6.2
   :links: SAD-6

~~~

-   **Status:** Architectural design in progress

### 6.3 Cross-Document References

Some information exists at intersections. Use **composite tags** to maintain traceability.

#### Example: Security Spanning BRD + NFR

**Business Context (BRD):**
> **Embedded Example Type:** reStructuredText BRD directive
~~~rst
.. brd:: Security: All communication limited to local sockets.
   :id: BRD-6.3

~~~

**Technical Constraint (NFR):**
> **Embedded Example Type:** reStructuredText NFR directive
~~~rst
.. nfr:: Security & Network
   :id: NFR-2
   :links: BRD-6.3

.. nfr:: All communication via 127.0.0.1 (no external access).
   :id: NFR-2.1
   :links: NFR-2

.. nfr:: No cloud dependencies for runtime operations.
   :id: NFR-2.2
   :links: NFR-2

~~~

**Architecture (SAD):**
> **Embedded Example Type:** reStructuredText SAD directive
~~~rst
.. sad:: ZeroMQ binds to tcp://127.0.0.1:* exclusively.
   :id: SAD-3.2
   :links: NFR-2.1

~~~

**Configuration (ICD):**
> **Embedded Example Type:** reStructuredText ICD directive
~~~rst
.. icd:: Localhost Bind Configuration
   :id: ICD-1
   :links: SAD-3.2

   .. code-block:: yaml

      core:
        router_bind: "tcp://127.0.0.1:5555"  # Localhost only per NFR-2.1

~~~

**Composite Traceability:**
> **Embedded Example Type:** reStructuredText ICD directive
~~~rst
.. icd:: local_bind
   :id: ICD-1
   :links: SAD-3.2

.. sad:: router_pattern
   :id: SAD-3.2
   :links: NFR-2.1

.. nfr:: local_only
   :id: NFR-2.1
   :links: BRD-6.3

~~~

----------
