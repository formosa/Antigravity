
## 22. Template Library

### 22.1 New Feature Template

Use this template when documenting a new feature from scratch:

~~~markdown
## Feature: [Feature Name]

### BRD: Business Justification
~~~rst
.. brd:: [Feature Name]
   :id: BRD-X

   [Problem being solved, market opportunity, competitive advantage]

   Success Metrics:
   - [Metric 1]: [Target value]
   - [Metric 2]: [Target value]
~~~

### NFR: Constraints & Limits
~~~rst
.. nfr:: [Feature Name] Constraints
   :id: NFR-X
   :links: BRD-X

.. nfr:: [Performance constraint]
   :id: NFR-X.1
   :links: NFR-X

.. nfr:: [Resource constraint]
   :id: NFR-X.2
   :links: NFR-X
~~~

### FSD: User-Facing Behavior
~~~rst
.. fsd:: [Feature Name] Workflow
   :id: FSD-X
   :links: NFR-X

.. fsd:: [User action] → [System response]
   :id: FSD-X.1
   :links: FSD-X
~~~

### SAD: Architecture
~~~rst
.. sad:: [Feature Name] Architecture
   :id: SAD-X
   :links: FSD-X

.. sad:: [Pattern selection with rationale]
   :id: SAD-X.1
   :links: SAD-X
~~~

### ICD: Data Contracts
~~~rst
.. icd:: [Feature Name] Schemas
   :id: ICD-X
   :links: SAD-X

   .. code-block:: json

      {
        "command": "...",
        "payload": {}
      }
~~~

### TDD: Component Design
~~~rst
.. tdd:: Component: [ClassName]
   :id: TDD-X
   :links: ICD-X, SAD-X

.. tdd:: Method: [signature]
   :id: TDD-X.1
   :links: TDD-X
~~~

### ISP: Implementation Stub
~~~python
# |ISP-X|: "[Description]"

class [ClassName]:
    """
    [Description]

    Implements
    ----------
    |TDD-X|, |FSD-X|
    """
    def __init__(self, ...):
        pass
~~~
~~~

---

### 22.2 Bug Fix Documentation Template

When fixing bugs, update documentation to prevent recurrence:

~~~markdown
## Bug Fix: [Bug ID/Title]

### Root Cause Analysis
**Tier:** [Tier]
**Tag:** [TIER]-X

### Documentation Updates

**BEFORE (Incorrect):**
~~~rst
.. [tier]:: [Old content with bug]
   :id: [TAG]
~~~

**AFTER (Corrected):**
~~~rst
.. [tier]:: [New content fixing bug]
   :id: [TAG]

.. rationale:: [TAG].R1
   :links: TAG

   Previous spec caused [bug] because [explanation]. Updated to [solution] which prevents [failure mode].
~~~

### Test Coverage Addition
~~~python
# :links: TAG
def test_[bug_scenario]():
    """Regression test for Bug [ID]."""
    # Test that previously failing scenario now passes
~~~
~~~

---

### 22.3 Refactoring Documentation Template

When refactoring requires tag restructuring:

~~~markdown
## Refactoring: [Refactor Name]

### Migration Map
| Old Tag | New Tag | Status | Notes |
|---------|---------|--------|-------|
| OLD-1   | NEW-1   | MOVED  | ...   |

### Backward Compatibility
~~~rst
.. [tier]:: [DEPRECATED v2.5 → See NEW-1]
   :id: OLD-1
~~~
~~~

----------
