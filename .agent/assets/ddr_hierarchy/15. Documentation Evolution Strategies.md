
## 15. Documentation Evolution Strategies

### 15.1 Version Control Integration

**Tag Stability Across Versions:**

```
VERSION 1.0:
|FSD-4.1|: "Wake Word: Always-on detection using pvporcupine."

VERSION 2.0:
|FSD-4.1|: "Wake Word: Always-on detection using pvporcupine."
|FSD-4.6| (NEW): "Multi-Wake-Word: Support custom wake phrases via training API."

```

**Rules:**

1.  **Never Delete Tags:** Mark as DEPRECATED instead
2.  **Never Renumber:** Add new sequential IDs (e.g., .6, .7)
3.  **Maintain Citations:** Old tags remain valid parents

**Deprecation Pattern:**

```
|NFR-3.3| [DEPRECATED v2.0 → See |NFR-13.1|]: "Memory (Core Queue): 1000 cap."
|NFR-13.1| ← |NFR-3.3|: "Memory (Core Queue): Dynamic sizing, 500-5000 cap."

```

### 15.2 Feature Flag Documentation

For gradual rollouts, extend tags with feature flag markers:

```
|FSD-15| [FEATURE_FLAG: streaming_tts]: "Streaming TTS Synthesis"
  |FSD-15.1|: UI plays audio chunks as generated (no full buffer wait).
  |FSD-15.2|: Runtime yields TTS frames incrementally.

|SAD-13| ← |FSD-15| [FEATURE_FLAG: streaming_tts]: "Streaming TTS Pattern"
  |SAD-13.1|: Pattern: Generator-based synthesis with chunk yields.
  |SAD-13.2|: Protocol: WebSocket for real-time audio frames.

```

**Configuration Hook:**

```yaml
|ICD-12| ← |SAD-13|:
features:
  streaming_tts:
    enabled: false  # Toggle without code changes
    chunk_size_ms: 200

```

### 15.3 Migration Paths

When refactoring requires tag restructuring:

**Before (V1):**

```
|FSD-4|: "Audio Acquisition"
  |FSD-4.1|: Wake Word
  |FSD-4.2|: VAD Stage 1
  |FSD-4.3|: VAD Stage 2

```

**After (V2 - Reorganized):**

```
|FSD-4| [RESTRUCTURED v2.0]: "Audio Acquisition"
  → See |FSD-4-V2| for current specification

|FSD-4-V2|: "Audio Processing Pipeline"
  |FSD-4-V2.1|: "Wake Word Detection" ← |FSD-4.1| (legacy)
  |FSD-4-V2.2|: "Voice Activity Detection"
    |FSD-4-V2.2.1|: Stage 1 (webrtcvad) ← |FSD-4.2| (legacy)
    |FSD-4-V2.2.2|: Stage 2 (Silero) ← |FSD-4.3| (legacy)
  |FSD-4-V2.3|: "Noise Reduction" (NEW)

```

**Migration Manifest:**

```yaml
migrations:
  - version: "2.0"
    date: "2026-03-15"
    changes:
      - type: "restructure"
        old_root: "|FSD-4|"
        new_root: "|FSD-4-V2|"
        mapping:
          "|FSD-4.1|": "|FSD-4-V2.1|"
          "|FSD-4.2|": "|FSD-4-V2.2.1|"
          "|FSD-4.3|": "|FSD-4-V2.2.2|"

```

----------
